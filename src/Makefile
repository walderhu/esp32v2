HOST = 192.168.0.232
PASS = 1234
CLI = python tools/webrepl_cli.py

.PHONY: put get ls repl deploy

FILE := $(word 2, $(MAKECMDGOALS))


put:
	@if [ -z "$(FILE)" ]; then \
		echo "–û—à–∏–±–∫–∞: —É–∫–∞–∂–∏—Ç–µ FILE=–∏–º—è_—Ñ–∞–π–ª–∞"; \
		exit 1; \
	fi
	@echo "‚û°Ô∏è  Uploading $(FILE) ..."
	@$(CLI) $(FILE) $(HOST):/$(FILE) -p $(PASS)

get:
	@if [ -z "$(FILE)" ]; then \
		echo "–û—à–∏–±–∫–∞: —É–∫–∞–∂–∏—Ç–µ FILE=–∏–º—è_—Ñ–∞–π–ª–∞"; \
		exit 1; \
	fi
	@echo "‚¨áÔ∏è  Downloading $(FILE) ..."
	@$(CLI) $(HOST):/$(FILE) ./$(FILE) -p $(PASS)

repl:
	@echo "üîå Connecting to REPL..."
	@$(CLI) -p $(PASS) $(HOST)

deploy:
	@echo "üöÄ Deploying *.py files..."
	@for f in *.py; do \
		[ -f "$$f" ] || continue; \
		echo "‚û°Ô∏è Uploading $$f ..."; \
		$(CLI) $$f $(HOST):/$$f -p $(PASS); \
	done
	@echo "‚úÖ Deploy complete."
